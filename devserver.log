
> tg-escrow-miniapp@0.1.0 dev C:\Users\mrjoh\Documents\Projects\escrow-services
> next dev

 ⚠ Port 3000 is in use, trying 3001 instead.
  ▲ Next.js 14.2.32
  - Local:        http://localhost:3001
  - Environments: .env.local

 ✓ Starting...
 ✓ Ready in 10.2s
 ○ Compiling /middleware ...
 ✓ Compiled /middleware in 1079ms (140 modules)
--- Middleware Debug ---
Request URL: /api/auth/signup
Session: null
User Email: undefined
 ○ Compiling /api/auth/signup ...
 ✓ Compiled /api/auth/signup in 3.5s (88 modules)
Signup via server-client failed, will fallback to service role if allowed: AuthApiError: Database error saving new user
    at handleError (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\@supabase\auth-js\dist\main\lib\fetch.js:69:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async _handleRequest (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\@supabase\auth-js\dist\main\lib\fetch.js:114:9)
    at async _request (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\@supabase\auth-js\dist\main\lib\fetch.js:95:18)
    at async SupabaseAuthClient.signUp (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\@supabase\auth-js\dist\main\GoTrueClient.js:321:23)
    at async POST (webpack-internal:///(rsc)/./app/api/auth/signup/route.ts:27:60)
    at async C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:818:17)
    at async C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\lib\start-server.js:141:13) {
  __isAuthError: true,
  status: 500,
  code: 'unexpected_failure'
}
 POST /api/auth/signup 500 in 6528ms
--- Middleware Debug ---
Request URL: /api/auth/signup
Session: null
User Email: undefined
Signup via server-client failed, will fallback to service role if allowed: AuthApiError: Database error saving new user
    at handleError (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\@supabase\auth-js\dist\main\lib\fetch.js:69:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async _handleRequest (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\@supabase\auth-js\dist\main\lib\fetch.js:114:9)
    at async _request (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\@supabase\auth-js\dist\main\lib\fetch.js:95:18)
    at async SupabaseAuthClient.signUp (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\@supabase\auth-js\dist\main\GoTrueClient.js:321:23)
    at async POST (webpack-internal:///(rsc)/./app/api/auth/signup/route.ts:27:60)
    at async C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:818:17)
    at async C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\lib\start-server.js:141:13) {
  __isAuthError: true,
  status: 500,
  code: 'unexpected_failure'
}
 POST /api/auth/signup 500 in 1252ms
--- Middleware Debug ---
Request URL: /api/auth/signup
Session: null
User Email: undefined
Signup via server-client failed, will fallback to service role if allowed: AuthApiError: Database error saving new user
    at handleError (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\@supabase\auth-js\dist\main\lib\fetch.js:69:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async _handleRequest (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\@supabase\auth-js\dist\main\lib\fetch.js:114:9)
    at async _request (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\@supabase\auth-js\dist\main\lib\fetch.js:95:18)
    at async SupabaseAuthClient.signUp (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\@supabase\auth-js\dist\main\GoTrueClient.js:321:23)
    at async POST (webpack-internal:///(rsc)/./app/api/auth/signup/route.ts:27:60)
    at async C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\base-server.js:818:17)
    at async C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (C:\Users\mrjoh\Documents\Projects\escrow-services\node_modules\next\dist\server\lib\start-server.js:141:13) {
  __isAuthError: true,
  status: 500,
  code: 'unexpected_failure'
}
 POST /api/auth/signup 500 in 1106ms
--- Middleware Debug ---
Request URL: /
Session: null
User Email: undefined
 ○ Compiling / ...
 ✓ Compiled / in 12.4s (501 modules)
 ✓ Compiled in 3.1s (258 modules)
 GET / 200 in 15635ms
--- Middleware Debug ---
Request URL: /.well-known/appspecific/com.chrome.devtools.json
Session: null
User Email: undefined
 ○ Compiling /_not-found ...
 ✓ Compiled /_not-found in 724ms (490 modules)
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 1153ms
--- Middleware Debug ---
Request URL: /seller
Session: null
User Email: undefined
 ○ Compiling /seller ...
--- Middleware Debug ---
Request URL: /seller
Session: null
User Email: undefined
--- Middleware Debug ---
Request URL: /seller
Session: null
User Email: undefined
 ELIFECYCLE  Command failed with exit code 3221225786.
